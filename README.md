# AIç”µå•†æµ·æŠ¥ç”Ÿæˆç³»ç»Ÿ

åŸºäºAIçš„ç”µå•†æµ·æŠ¥æ‰¹é‡ç”Ÿæˆç³»ç»Ÿï¼Œæ”¯æŒä»äº§å“å›¾ç‰‡å’Œæè¿°è‡ªåŠ¨ç”Ÿæˆä¸€å¥—å®Œæ•´çš„ç”µå•†è§†è§‰æµ·æŠ¥ã€‚

## ç³»ç»Ÿæ¶æ„

```
ç”¨æˆ·è¾“å…¥ â”€â”€â†’ è®¾è®¡AI â”€â”€â†’ æç¤ºè¯è§£æ â”€â”€â†’ æ‰¹é‡å›¾åƒç”Ÿæˆ â”€â”€â†’ å‰ç«¯å±•ç¤º
   â”‚              â”‚              â”‚              â”‚
äº§å“å›¾ç‰‡      ç”Ÿæˆè®¾è®¡æ–¹æ¡ˆ    æµ·æŠ¥åç§°+æç¤ºè¯    æµ·æŠ¥å›¾ç‰‡
äº§å“è¯´æ˜    (design_output)   (prompts.json)   (*.jpg)
```

## ç›®å½•ç»“æ„

```
poster-generator/
â”œâ”€â”€ backend/                 # åç«¯APIæœåŠ¡
â”‚   â”œâ”€â”€ app.py              # FastAPIä¸»åº”ç”¨
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ design_generator.py    # è®¾è®¡AIç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ poster_generator.py    # æµ·æŠ¥å›¾ç‰‡ç”Ÿæˆå™¨
â”‚   â”‚   â””â”€â”€ batch_processor.py     # æ‰¹é‡å¤„ç†å™¨
â”‚   â”œâ”€â”€ utils/              # å·¥å…·æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ logger.py       # æ—¥å¿—å·¥å…·
â”‚   â”‚   â””â”€â”€ storage.py      # å­˜å‚¨ç®¡ç†
â”‚   â””â”€â”€ requirements.txt    # Pythonä¾èµ–
â”œâ”€â”€ frontend/               # å‰ç«¯é¡µé¢
â”‚   â””â”€â”€ index.html          # ä¸»é¡µé¢
â”œâ”€â”€ data/                   # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ uploads/            # ä¸Šä¼ çš„å›¾ç‰‡
â”‚   â”œâ”€â”€ outputs/            # ç”Ÿæˆçš„æµ·æŠ¥
â”‚   â”œâ”€â”€ designs/            # è®¾è®¡æ–¹æ¡ˆè¾“å‡º
â”‚   â””â”€â”€ prompts/            # è§£æçš„æç¤ºè¯
â”œâ”€â”€ logs/                   # æ—¥å¿—ç›®å½•
â”‚   â”œâ”€â”€ api.log             # APIæ—¥å¿—
â”‚   â””â”€â”€ task_*.log          # ä»»åŠ¡æ—¥å¿—
â”œâ”€â”€ start.sh                # Linux/Macå¯åŠ¨è„šæœ¬
â””â”€â”€ README.md               # è¯´æ˜æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd backend
pip install -r requirements.txt
```

### 2. å¯åŠ¨åç«¯æœåŠ¡

```bash
# Linux/Mac
chmod +x start.sh
./start.sh

# æˆ–æ‰‹åŠ¨å¯åŠ¨
cd backend
python -m uvicorn app:app --host 0.0.0.0 --port 8000 --reload
```

### 3. æ‰“å¼€å‰ç«¯é¡µé¢

ç”¨æµè§ˆå™¨æ‰“å¼€ `frontend/index.html`

## APIæ¥å£

### å¥åº·æ£€æŸ¥
```
GET /
```

### ä¸Šä¼ å›¾ç‰‡
```
POST /api/upload-images
Content-Type: multipart/form-data

å‚æ•°:
- user_id: ç”¨æˆ·ID
- product_id: äº§å“ID
- files: å›¾ç‰‡æ–‡ä»¶åˆ—è¡¨ï¼ˆæœ€å¤š9å¼ ï¼‰
```

### å¼€å§‹ç”Ÿæˆ
```
POST /api/generate
Content-Type: application/json

{
    "user_id": "user_123",
    "product_id": "product_456",
    "product_description": "äº§å“æè¿°..."
}

è¿”å›:
{
    "success": true,
    "task_id": "abc12345",
    "message": "ä»»åŠ¡å·²åˆ›å»º"
}
```

### æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
```
GET /api/task/{task_id}

è¿”å›:
{
    "task_id": "abc12345",
    "status": "generating",  // pending/processing/design_complete/generating/completed/failed
    "progress": 60,
    "message": "æ­£åœ¨ç”Ÿæˆ: æµ·æŠ¥03 - å·¥è‰ºå±•ç¤º",
    ...
}
```

### è·å–æµ·æŠ¥åˆ—è¡¨
```
GET /api/posters/{user_id}/{product_id}

è¿”å›:
{
    "posters": [
        {"name": "æµ·æŠ¥01 - ä¸»KVè§†è§‰", "filename": "poster_01.jpg", "url": "/api/poster/..."}
    ]
}
```

### ä¸‹è½½æµ·æŠ¥
```
GET /api/poster/{user_id}/{product_id}/{filename}
```

## æ—¥å¿—è¯´æ˜

### APIæ—¥å¿— (logs/api.log)
è®°å½•æ‰€æœ‰APIè¯·æ±‚å’Œç³»ç»Ÿäº‹ä»¶ï¼š
```
2025-01-01 12:00:00 | INFO | api | åˆ›å»ºä»»åŠ¡: abc12345 | ç”¨æˆ·: user_123
2025-01-01 12:00:01 | INFO | api | æ›´æ–°ä»»åŠ¡: abc12345 | çŠ¶æ€: processing | è¿›åº¦: 10%
```

### ä»»åŠ¡æ—¥å¿— (logs/task_*.log)
æ¯ä¸ªä»»åŠ¡ç‹¬ç«‹çš„è¯¦ç»†æ—¥å¿—ï¼š
```
================================================================================
ä»»åŠ¡ID: abc12345
å¼€å§‹æ—¶é—´: 2025-01-01T12:00:00
================================================================================

ğŸ“ é˜¶æ®µ1: è°ƒç”¨è®¾è®¡AIç”Ÿæˆæç¤ºè¯
   âœ“ è®¾è®¡è¾“å‡ºå·²ä¿å­˜: data/designs/user_123/product_456/design_output_20250101_120000.txt
   âœ“ è¾“å‡ºé•¿åº¦: 15000 å­—ç¬¦

ğŸ” é˜¶æ®µ2: è§£æè®¾è®¡è¾“å‡º
   âœ“ æ‰¾åˆ° 10 ä¸ªæµ·æŠ¥æç¤ºè¯
   âœ“ æç¤ºè¯å·²ä¿å­˜: data/prompts/user_123/product_456/prompts_20250101_120001.json
      - æµ·æŠ¥01 - ä¸»KVè§†è§‰
      - æµ·æŠ¥02 - ç”Ÿæ´»åœºæ™¯
      ...

ğŸ¨ é˜¶æ®µ3: æ‰¹é‡ç”Ÿæˆæµ·æŠ¥å›¾ç‰‡
   [1/10] ç”Ÿæˆ: æµ·æŠ¥01 - ä¸»KVè§†è§‰
      âœ“ æˆåŠŸ: ['data/outputs/user_123/product_456/æµ·æŠ¥01_ä¸»KVè§†è§‰.jpg']
   ...

================================================================================
ğŸ“Š ç”Ÿæˆç»Ÿè®¡
   æ€»æ•°: 10
   æˆåŠŸ: 10
   å¤±è´¥: 0
================================================================================

ğŸ‰ ä»»åŠ¡å®Œæˆ!
```

## æ•°æ®å­˜å‚¨

### è®¾è®¡æ–¹æ¡ˆ (data/designs/)
```
designs/
â””â”€â”€ {user_id}/
    â””â”€â”€ {product_id}/
        â”œâ”€â”€ design_output_20250101_120000.txt  # å¸¦æ—¶é—´æˆ³ç‰ˆæœ¬
        â””â”€â”€ design_output_latest.txt            # æœ€æ–°ç‰ˆæœ¬
```

### æç¤ºè¯ (data/prompts/)
```
prompts/
â””â”€â”€ {user_id}/
    â””â”€â”€ {product_id}/
        â”œâ”€â”€ prompts_20250101_120000.json
        â””â”€â”€ prompts_latest.json
```

### ç”Ÿæˆç»“æœ (data/outputs/)
```
outputs/
â””â”€â”€ {user_id}/
    â””â”€â”€ {product_id}/
        â”œâ”€â”€ æµ·æŠ¥01_ä¸»KVè§†è§‰.jpg
        â”œâ”€â”€ æµ·æŠ¥02_ç”Ÿæ´»åœºæ™¯.jpg
        â”œâ”€â”€ ...
        â””â”€â”€ summary_latest.json   # ç”Ÿæˆæ‘˜è¦
```

## å¤„ç†æµç¨‹

1. **ç”¨æˆ·ä¸Šä¼ ** â†’ å›¾ç‰‡ä¿å­˜åˆ° `data/uploads/{user_id}/{product_id}/`
2. **è®¾è®¡AIåˆ†æ** â†’ è¾“å‡ºä¿å­˜åˆ° `data/designs/` + è®°å½•æ—¥å¿—
3. **æç¤ºè¯è§£æ** â†’ JSONä¿å­˜åˆ° `data/prompts/` + è®°å½•æ—¥å¿—
4. **æ‰¹é‡ç”Ÿæˆ** â†’ å›¾ç‰‡ä¿å­˜åˆ° `data/outputs/` + æ¯å¼ è®°å½•æ—¥å¿—
5. **ç”Ÿæˆæ‘˜è¦** â†’ summary.json ä¿å­˜åˆ° `data/outputs/`

## æŠ€æœ¯æ ˆ

- **åç«¯**: FastAPI + Python 3.8+
- **å‰ç«¯**: Vue 3 + Tailwind CSS
- **AI**: Gemini API (è®¾è®¡+å›¾åƒç”Ÿæˆ)

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿ç½‘ç»œå¯ä»¥è®¿é—® AI API
2. æ¯ä¸ªä»»åŠ¡å¯èƒ½éœ€è¦ 3-10 åˆ†é’Ÿå®Œæˆ
3. ç”Ÿæˆçš„å›¾ç‰‡å’Œæ—¥å¿—ä¼šå ç”¨ç£ç›˜ç©ºé—´ï¼Œå»ºè®®å®šæœŸæ¸…ç†
